<header id="authHeader" style="display: none">
  <nav>
    <a href="../index.html" class="logo">SportzHub</a>
    <ul class="nav-links">
      <li><a href="../pages/index.html">Home</a></li>
      <li><a href="../pages/booking.html">Book Now</a></li>
      <li id="loginNav"><a href="../pages/login.html">Login</a></li>
      <li id="registerNav"><a href="../pages/register.html">Register</a></li>
    </ul>
    <div class="menu-toggle">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </nav>
</header>

<script>
  // Update navigation based on authentication status
  document.addEventListener("DOMContentLoaded", () => {
    setTimeout(() => {
      const userToken = localStorage.getItem("userToken");
      const userName = localStorage.getItem("userName");
      const userRole = localStorage.getItem("userRole");

      const header = document.getElementById("authHeader");
      const loginNav = document.getElementById("loginNav");
      const registerNav = document.getElementById("registerNav");
      const navLinks = document.querySelector(".nav-links");

      if (userToken) {
        // User is logged in, show header and update navigation
        if (header) {
          header.style.display = "block";
        }

        if (loginNav && registerNav) {
          loginNav.innerHTML = `<a href="#" style="cursor: default;">Welcome, ${
            userName || "User"
          }</a>`;
          registerNav.innerHTML = `<a href="#" onclick="logout()">Logout</a>`;

          // Add admin link for admin users
          if (userRole === "admin") {
            const adminNav = document.createElement("li");
            adminNav.innerHTML =
              '<a href="../pages/admin/dashboard.html">Admin Panel</a>';
            navLinks.insertBefore(adminNav, registerNav);
          }
        }
      } else {
        // User not logged in, hide header
        if (header) {
          header.style.display = "none";
        }
      }
    }, 100);
  });

  // Logout function
  function logout() {
    if (confirm("Are you sure you want to logout?")) {
      localStorage.clear();

      // Determine correct path for login based on current location
      const currentPath = window.location.pathname;
      let loginPath = "login.html";

      if (currentPath.includes("/admin/")) {
        loginPath = "../login.html";
      } else if (currentPath.includes("/pages/")) {
        loginPath = "login.html";
      } else {
        loginPath = "pages/login.html";
      }

      window.location.href = loginPath;
    }
  }
</script>
